<div class="register-container">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8 col-md-10 register-card">
        <h1 data-cy="registerTitle" class="text-center">Crea Account</h1>
        <p class="text-center text-muted mb-4">Unisciti a BoardRoom per gestire le tue prenotazioni</p>

        @if (success()) {
          <div class="alert alert-success"><strong>Registrazione completata!</strong> Controlla la tua email per confermare l'account.</div>
        }
        @if (error() || errorUserExists() || errorEmailExists() || doNotMatch()) {
          <div class="alert alert-danger">
            @if (error()) {
              <span>La registrazione è fallita. Riprova.</span>
            }
            @if (errorUserExists()) {
              <span>Username già occupato.</span>
            }
            @if (errorEmailExists()) {
              <span>Email già in uso.</span>
            }
            @if (doNotMatch()) {
              <span>Le password non corrispondono.</span>
            }
          </div>
        }

        @if (!success()) {
          <form name="form" (ngSubmit)="register()" [formGroup]="registerForm">
            <div class="mb-3">
              <label class="form-label" for="login">Username</label>
              <input type="text" class="form-control" id="login" name="login" placeholder="Scegli un username" formControlName="login" />
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label" for="firstName">Nome</label>
                <input type="text" class="form-control" id="firstName" name="firstName" formControlName="firstName" placeholder="Nome" />
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label" for="lastName">Cognome</label>
                <input type="text" class="form-control" id="lastName" name="lastName" formControlName="lastName" placeholder="Cognome" />
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label" for="email">Email</label>
              <input type="email" class="form-control" id="email" name="email" placeholder="esempio@mail.com" formControlName="email" />
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label" for="numeroDiTelefono">Telefono</label>
                <input
                  type="text"
                  class="form-control"
                  id="numeroDiTelefono"
                  name="numeroDiTelefono"
                  formControlName="numeroDiTelefono"
                  placeholder="+39..."
                />
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label" for="nomeAzienda">Azienda (Opzionale)</label>
                <input
                  type="text"
                  class="form-control"
                  id="nomeAzienda"
                  name="nomeAzienda"
                  formControlName="nomeAzienda"
                  placeholder="Azienda"
                />
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label" for="password">Password</label>
              <input
                type="password"
                class="form-control"
                id="password"
                name="password"
                placeholder="Crea password"
                formControlName="password"
              />
              <jhi-password-strength-bar [passwordToCheck]="registerForm.controls.password.value" />
            </div>

            <div class="mb-4">
              <label class="form-label" for="confirmPassword">Conferma password</label>
              <input
                type="password"
                class="form-control"
                id="confirmPassword"
                name="confirmPassword"
                placeholder="Ripeti password"
                formControlName="confirmPassword"
              />
            </div>

            <button type="submit" [disabled]="registerForm.invalid" class="btn btn-primary w-100 py-2">Crea Account</button>
          </form>
        }

        <div class="mt-4 text-center login-footer">
          <span class="text-muted">Hai già un account? </span>
          <a routerLink="/login" class="login-link">Accedi qui</a>
        </div>
      </div>
    </div>
  </div>
</div>
